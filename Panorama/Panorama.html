<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Panorama</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.5.1/dist/aframe-look-at-component.min.js"></script>
    <!--animation component script-->
    <script src="https://unpkg.com/aframe-animation-component@^4.1.2/dist/aframe-animation-component.min.js"></script>

    <script>
        AFRAME.registerComponent('hotspots',{
            init:function(){
                this.el.addEventListener('reloadspots',function(evt){

                    //get the entire current spot group and scale it to 0
                    var currspotgroup=document.getElementById(evt.detail.currspots);
                    currspotgroup.setAttribute("scale","0 0 0");

                    //get the entire new spot group and scale it to 1
                    var newspotgroup=document.getElementById(evt.detail.newspots);
                    newspotgroup.setAttribute("scale","1 1 1");
                });
            }
        });
        AFRAME.registerComponent('spot',{
            schema:{
                linkto:{type:"string",default:""},
                spotgroup:{type:"string",default:""}
            },
            init:function(){

                //add image source of hotspot icon
                this.el.setAttribute("src","#hotspot");
                //make the icon look at the camera all the time
                this.el.setAttribute("look-at","#cam");

                var data=this.data;

                this.el.addEventListener('click',function(){
                    //set the skybox source to the new image as per the spot
                    var sky=document.getElementById("skybox");
                    sky.setAttribute("src",data.linkto);

                    var spotcomp=document.getElementById("spots");
                    var currspots=this.parentElement.getAttribute("id");
                    //create event for spots component to change the spots data
                    spotcomp.emit('reloadspots',{newspots:data.spotgroup,currspots:currspots});
                });
            }
        });
    </script>
</head>
<body>
<a-scene>
    <a-assets>
        <img id="A12" src="image/A12.JPG" height="2688" width="5376" alt=""/>
        <img id="A18" src="image/A18.JPG" height="2688" width="5376" alt=""/>
        <img id="A19" src="image/A19.JPG" height="2688" width="5376" alt=""/>
        <img id="A21" src="image/A21.JPG" height="2688" width="5376" alt=""/>
        <img id="A22" src="image/A22.JPG" height="2688" width="5376" alt=""/>
        <img id="A23" src="image/A23.JPG" height="2688" width="5376" alt=""/>
        <img id="accueilCentral" src="image/accueilCentral.jpg" height="2688" width="5376" alt=""/>
        <img id="B10" src="image/B10.JPG" height="2688" width="5376" alt=""/>
        <img id="B12" src="image/B12.JPG" height="2688" width="5376" alt=""/>
        <img id="B14" src="image/B14.JPG" height="2688" width="5376" alt=""/>
        <img id="B17" src="image/B17.JPG" height="2688" width="5376" alt=""/>
        <img id="B18" src="image/B18.JPG" height="2688" width="5376" alt=""/>
        <img id="B19" src="image/B19.JPG" height="2688" width="5376" alt=""/>
        <img id="B20" src="image/B20.JPG" height="2688" width="5376" alt=""/>
        <img id="B21" src="image/B21.JPG" height="2688" width="5376" alt=""/>
        <img id="B22" src="image/B22.JPG" height="2688" width="5376" alt=""/>
        <img id="B23" src="image/B23.JPG" height="2688" width="5376" alt=""/>
        <img id="cafet" src="image/cafet.jpg" height="2688" width="5376" alt=""/>
        <img id="centreCentral" src="image/centreCentral.jpg" height="2688" width="5376" alt=""/>
        <img id="coinCafet" src="image/coinCafet.JPG" height="2688" width="5376" alt=""/>
        <img id="coinGauche" src="image/coinGauche.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirA12" src="image/couloirA12.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirA18A19" src="image/couloirA18A19.JPG" height="2688" width="5376" alt=""/>
        <img id="A2122" src="image/couloirA21A22.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirA23" src="image/couloirA23.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirB12" src="image/couloirB12.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirB14B17" src="image/couloirB14B17.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirB18B19" src="image/couloirB18B19.JPG" height="2688" width="5376" alt=""/>
        <img id="couloirB20B21B22B23" src="image/couloirB20B21B22B23.JPG" height="2688" width="5376" alt=""/>
        <img id="croisementChemin" src="image/croisementChemin.JPG" height="2688" width="5376" alt=""/>
        <img id="devantAmphi" src="image/devantAmphi.jpg" height="2688" width="5376" alt=""/>
        <img id="devantBibliothÃ¨que" src="image/devantBibliotheque.jpg" height="2688" width="5376" alt=""/>
        <img id="droitCentral" src="image/droitCentral.jpg" height="2688" width="5376" alt=""/>
        <img id="entreeCafet" src="image/entreeCafet.jpg" height="2688" width="5376" alt=""/>
        <img id="escalierGaucheA" src="image/escalierGaucheA.JPG" height="2688" width="5376" alt=""/>
        <img id="escalierGaucheB" src="image/escalierGaucheB.JPG" height="2688" width="5376" alt=""/>
        <img id="escalierMilieuA" src="image/escalierMilieuA.JPG" height="2688" width="5376" alt=""/>
        <img id="escalierMilieuB" src="image/escalierMilieuB.JPG" height="2688" width="5376" alt=""/>
        <img id="exterieuurCentral" src="image/exterieurCentral.jpg" height="2688" width="5376" alt=""/>
        <img id="exterieurDroit" src="image/exterieurDroit.jpg" height="2688" width="5376" alt=""/>
        <img id="exterieurGauche" src="image/exterieurGauche.JPG" height="2688" width="5376" alt=""/>
        <img id="exterieurMilieu" src="image/exterieurMilieu.JPG" height="2688" width="5376" alt=""/>
        <img id="gaucheA" src="image/gaucheA.JPG" height="2688" width="5376" alt=""/>
        <img id="gaucheB" src="image/gaucheB.JPG" height="2688" width="5376" alt=""/>
        <img id="milieurA" src="image/milieuA.JPG" height="2688" width="5376" alt=""/>
        <img id="milieurB" src="image/milieuB.JPG" height="2688" width="5376" alt=""/>
        <img id="parking" src="image/parking.jpg" height="2688" width="5376" alt=""/>
        <img id="sandwich" src="image/sandwich.jpg" height="2688" width="5376" alt=""/>
        <img id="secretariat" src="image/secretariat.JPG" height="2688" width="5376" alt=""/>
    </a-assets>


    <a-sky id="skybox" src="#A12"></a-sky>

    <a-entity id="cam" camera position="0 1.6 0" look-controls>
        <a-entity cursor="fuse:true;fuseTimeout:2000"
                  geometry="primitive:ring;radiusInner:0.01;radiusOuter:0.02"
                  position="0 0 -1.8"
                  material="shader:flat;color:blue">
        </a-entity>
    </a-entity>

    <a-entity id="spots" hotspots>

        <a-entity id="group-A12">
            <a-image spot="linkto:#A18;spotgroup:group-A18" color="transparent" position="4.5 1.8 0"></a-image>

            <a-entity geometry="primitive : plane; width : 1;height : auto;"
                      material="color:red" look-at="#cam" position="4 2.5 0"
                      text="value:Vers la salle A18; color:black;width:3;align:center">
            </a-entity>
        </a-entity>

        <a-entity id="group-A18" scale ="0 0 0">
            <a-image spot="linkto:#A12;spotgroup:group-A12" color="transparent" position="1 1.2 3"></a-image>

            <a-entity geometry="primitive : plane; width : 1;height : auto;"
                      material="color:blue" look-at="#cam" position="1 2 3"
                      text="value:Vers la salle A12; color:black;width:3;align:center">
            </a-entity>

        </a-entity>
    </a-entity>
</a-scene>
</body>
</html>